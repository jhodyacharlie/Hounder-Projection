<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Toko Saya - E-commerce</title>
  <link rel='stylesheet' href='https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.3.7/css/bootstrap.min.css'>
  <link rel='stylesheet' href='https://fonts.googleapis.com/css?family=Arvo'>
  <link rel="stylesheet" href="./style.css">

  <!-- 1. IMPORT SUPABASE LIBRARY -->
  <script src="https://cdn.jsdelivr.net"></script>
</head>
<body>

<section class="page_404">
  <div class="container">
    <div class="row">
      <div class="col-sm-12">
        <div class="col-sm-10 col-sm-offset-1 text-center">
          <div class="four_zero_four_bg">
            <h1 class="text-center">404</h1>
          </div>

          <div class="contant_box_404">
            <h3 class="h2">Look like you're lost</h3>
            <p>the page you are looking for not avaible!</p>
            
            <!-- Tempat menampilkan status koneksi di layar -->
            <div id="status-koneksi" style="margin: 20px; color: #888; font-family: 'Arvo';">
              Sedang menghubungkan ke Database...
            </div>

            <a href="" class="link_404">Go to Home</a>
          </div>
        </div>
      </div>
    </div>
  </div>
</section>

<!-- 2. MESIN HUBUNG SUPABASE -->
<script>
  // Menggunakan window.onload agar script berjalan SETELAH library supabase siap
  window.onload = function() {
    const statusDiv = document.getElementById('status-koneksi');

    try {
      // Data akses Anda
      const supabaseUrl = 'https://qwqhsqqjhujpiulsesnu.supabase.co';
      const supabaseKey = 'sb_publishable_DcZ6hZEQ7C4Hcg60GEhOlg_DI-VTTW5';

      // Inisialisasi
      window.supabaseClient = supabase.createClient(supabaseUrl, supabaseKey);

      console.log("Supabase Client Berhasil Dibuat!");
      statusDiv.innerHTML = "✅ Database Terhubung!";
      statusDiv.style.color = "green";

      // Jalankan fungsi tes ambil data
      ambilDataProduk();

    } catch (error) {
      console.error("Gagal inisialisasi:", error);
      statusDiv.innerHTML = "❌ Gagal Menghubungkan Database";
      statusDiv.style.color = "red";
    }
  };

  // Fungsi untuk mengetes ambil data dari tabel 'products'
  async function ambilDataProduk() {
    const { data, error } = await window.supabaseClient.from('products').select('*');
    
    if (error) {
      console.warn("Tabel products belum ada atau RLS terkunci:", error.message);
    } else {
      console.log("Data Produk Ditemukan:", data);
    }
  }
</script>

</body>
</html>
